<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:of="http://omnifaces.org/functions">

	<f:view contentType="text/html" encoding="UTF-8">
		<head>
			<ui:include src="/layout/headCommons.xhtml" />
		</head>
	
		<h:body>
   			<h:form>
				<div class="error-panel animate-1 bounceIn">
					#{msg['error.unexpectedSystemError']}

                    <h:panelGroup rendered="#{facesContext.application.projectStage eq 'Development'}">
						<div class="animate-2 fadeIn">
							<ul>
								<li>Date/time: #{of:formatDate(now, 'yyyy-MM-dd HH:mm:ss')}</li>
								<li>User agent: #{header['user-agent']}</li>
								<li>User IP: #{empty header['x-forwarded-for'] ? request.remoteAddr : fn:split(header['x-forwarded-for'], ',')[0]}</li>
								<li>Request URI: <a href="#{requestScope['javax.servlet.error.request_uri']}">#{requestScope['javax.servlet.error.request_uri']}</a></li>
								<li>Ajax request: #{facesContext.partialViewContext.ajaxRequest ? 'Yes' : 'No'}</li>
								<li>Status code: #{requestScope['javax.servlet.error.status_code']}</li>
								<li>Exception type: #{requestScope['javax.servlet.error.exception_type']}</li>
								<li style="max-width: 800px;">Exception message: #{requestScope['javax.servlet.error.message']}</li>
							</ul>
						</div>
                    </h:panelGroup>
				</div>
   			</h:form>
		</h:body>
	</f:view>
</html>